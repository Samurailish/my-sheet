/* =========================
   Base / Reset
========================= */
*,
*::before,
*::after { box-sizing: border-box; }

html, body { height: 100%; }

body {
  margin: 0;
  font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
  color: #0f172a;
  background: #ffffff;
}

/* =========================
   Layout
========================= */
.container {
  max-width: 1400px;
  margin: 0 auto;
  padding: 22px 18px 40px;
}

h1 {
  margin: 0 0 6px;
  font-size: 44px;
  line-height: 1.05;
  letter-spacing: -0.02em;
}

.subhead {
  margin: 0 0 12px;
  color: #64748b;
  font-size: 13px;
}

.controls {
  display: flex;
  flex-wrap: wrap;
  gap: 10px;
  align-items: center;
  margin: 10px 0 12px;
}

button, .btn {
  border: 1px solid #e2e8f0;
  background: #0b1220;
  color: #fff;
  padding: 7px 12px;
  border-radius: 8px;
  cursor: pointer;
  font-weight: 600;
  font-size: 12px;
}

button.secondary, .btn.secondary {
  background: #f8fafc;
  color: #0f172a;
}

button.danger, .btn.danger {
  background: #ef4444;
  border-color: #ef4444;
}

button:active { transform: translateY(1px); }

.linkBox {
  width: 100%;
  border: 1px solid #e2e8f0;
  border-radius: 10px;
  padding: 10px 12px;
  color: #334155;
  background: #fff;
  font-size: 13px;
}

/* =========================
   Legend
========================= */
.legend {
  display: flex;
  flex-wrap: wrap;
  align-items: center;
  gap: 10px;
  margin: 8px 0 10px;
  color: #64748b;
  font-size: 12px;
}

.legendItem {
  display: inline-flex;
  align-items: center;
  gap: 6px;
}

.legendSwatch {
  width: 24px;
  height: 14px;
  border-radius: 999px;
  border: 1px solid rgba(15, 23, 42, 0.12);
  opacity: 0.6; /* “50% color” look */
}

.legendSwatch.fav { background: #60a5fa; }
.legendSwatch.like { background: #6fcf97; }
.legendSwatch.int { background: #f2c76e; }
.legendSwatch.no { background: #e57373; }
.legendSwatch.empty { background: #ffffff; }

/* =========================
   Cards Grid
========================= */
.cards {
  display: grid;
  grid-template-columns: repeat(4, minmax(0, 1fr));
  gap: 14px;
  align-items: start;
  margin-top: 10px;
}

@media (max-width: 1280px) {
  .cards { grid-template-columns: repeat(3, minmax(0, 1fr)); }
}
@media (max-width: 980px) {
  .cards { grid-template-columns: repeat(2, minmax(0, 1fr)); }
}
@media (max-width: 640px) {
  .cards { grid-template-columns: 1fr; }
}

/* =========================
   Card
========================= */
.card {
  border: 1px solid #e2e8f0;
  border-radius: 14px;
  background: #fff;
  overflow: visible; /* IMPORTANT: never clip in print */
}

.cardHeader {
  padding: 12px 14px 10px;
  border-bottom: 1px solid #e2e8f0;
  display: flex;
  align-items: start;
  justify-content: space-between;
  gap: 10px;
}

.cardTitle {
  font-weight: 900;
  letter-spacing: 0.02em;
  font-size: 14px;
  margin: 0;
}

.cardDesc {
  margin: 4px 0 0;
  color: #64748b;
  font-size: 11px;
}

.helpBtn {
  flex: 0 0 auto;
  width: 26px;
  height: 26px;
  border-radius: 999px;
  border: 1px solid rgba(15, 23, 42, 0.16);
  background: #f3f4f6;
  color: #334155;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  font-weight: 900;
  cursor: pointer;
}

.cardBody { padding: 10px 0 8px; }

.groupTitle {
  padding: 8px 14px;
  font-size: 11px;
  letter-spacing: 0.08em;
  font-weight: 900;
  color: #0f172a;
  border-top: 1px solid #eef2f7;
}

.groupTitle:first-child {
  border-top: none;
  padding-top: 6px;
}

/* column labels row */
.colLabelRow {
  display: grid;
  grid-template-columns: 26px minmax(0, 1fr) auto;
  gap: 10px;
  padding: 6px 14px 6px;
  color: #64748b;
  font-size: 11px;
  font-weight: 700;
}

.colLabelRow .labels {
  display: flex;
  justify-content: flex-end;
  gap: 18px;
  min-width: 0;
}

.colLabelRow .labels span { white-space: nowrap; }

/* =========================
   Rows
========================= */
.row {
  display: grid;
  grid-template-columns: 26px minmax(0, 1fr) auto;
  gap: 10px;
  align-items: center;
  padding: 7px 14px;
  border-top: 1px solid #eef2f7;
}

.row:first-of-type { border-top: none; }

.infoBtn {
  width: 22px;
  height: 22px;
  border-radius: 999px;
  border: 1px solid rgba(15, 23, 42, 0.18);
  background: #f3f4f6;
  color: #334155; /* less depressing than pure black */
  font-weight: 900;
  cursor: pointer;
  display: inline-flex;
  align-items: center;
  justify-content: center;
}

.itemName {
  font-size: 12px;
  font-weight: 700;
  color: #0f172a;
  min-width: 0;             /* crucial */
  overflow: hidden;         /* crucial */
  text-overflow: ellipsis;  /* nice */
  white-space: nowrap;      /* keeps rows tidy on screen */
}

/* Dots area */
.dots {
  display: flex;
  gap: 6px;
  align-items: center;
  justify-content: flex-end;
  min-width: 0;
}

/* Each rating button */
.dotBtn {
  border: 0;
  background: transparent;
  padding: 0;
  cursor: pointer;
  line-height: 0;
}

.dot {
  width: 22px;
  height: 14px;
  border-radius: 999px;
  border: 1px solid rgba(15, 23, 42, 0.14);
  display: inline-block;
  opacity: 0.55; /* “50% color” until selected */
  transition: opacity 120ms ease, transform 120ms ease, box-shadow 120ms ease;
}

/* rating colors */
.dot.fav  { background: #60a5fa; }
.dot.like { background: #6fcf97; }
.dot.int  { background: #f2c76e; }
.dot.no   { background: #e57373; }
.dot.empty{ background: #ffffff; }

/* selected state (JS adds .selected on button) */
.dotBtn.selected .dot {
  opacity: 1;
  box-shadow: 0 0 0 2px rgba(15, 23, 42, 0.08);
}

/* hover (desktop) */
@media (hover: hover) {
  .dotBtn:hover .dot { transform: translateY(-1px); opacity: 0.9; }
}

/* =========================
   PRINT / PDF (the important part)
========================= */
@page {
  /* You can switch to A4 by replacing 'Letter' with 'A4' if you prefer */
  size: Letter portrait;
  margin: 10mm;
}

@media print {
  /* Remove browser weirdness */
  html, body { height: auto !important; }
  body { -webkit-print-color-adjust: exact; print-color-adjust: exact; }

  /* Hide UI-only controls (optional). If you want them in PDF, comment these out. */
  .controls, .subhead, .legend { display: none !important; }

  .container {
    max-width: none !important;
    padding: 0 !important;
    margin: 0 !important;
  }

  /* Make the sheet denser */
  h1 { font-size: 18px !important; margin: 0 0 6px !important; }

  .cards {
    /* Use 4 columns for print density. Change to 3 if you want bigger text. */
    grid-template-columns: repeat(4, minmax(0, 1fr)) !important;
    gap: 8px !important;
  }

  .card {
    border-radius: 10px !important;
    overflow: visible !important; /* NO clipping */
    break-inside: auto !important;            /* reduce dead space */
    page-break-inside: auto !important;       /* reduce dead space */
  }

  .cardHeader { padding: 8px 10px !important; }
  .cardBody { padding: 6px 0 6px !important; }

  .cardTitle { font-size: 11px !important; }
  .cardDesc  { font-size: 9px !important; }

  .groupTitle { padding: 6px 10px !important; font-size: 9px !important; }

  .colLabelRow, .row {
    padding-left: 10px !important;
    padding-right: 10px !important;
    gap: 8px !important;
  }

  /* BIG FIX: prevent overlap by allowing the dots block to wrap in print */
  .dots {
    flex-wrap: wrap !important;
    row-gap: 4px !important;
    justify-content: flex-end !important;
  }

  /* BIG FIX: allow names to wrap in print so they don't fight the dots */
  .itemName {
    white-space: normal !important;
    overflow: visible !important;
    text-overflow: clip !important;
    font-size: 9px !important;
    line-height: 1.1 !important;
  }

  .infoBtn, .helpBtn {
    width: 18px !important;
    height: 18px !important;
    font-size: 10px !important;
  }

  /* Dots smaller in print */
  .dot {
    width: 14px !important;
    height: 9px !important;
    opacity: 0.6 !important;
  }

  .dotBtn.selected .dot { opacity: 1 !important; }

  /* Ensure nothing uses clipping that murders print */
  * { box-shadow: none !important; }
}
