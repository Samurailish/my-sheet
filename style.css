/* ==========================
   Base / Reset
   ========================== */
* { box-sizing: border-box; }
html, body { height: 100%; }
body {
  margin: 0;
  font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Arial, "Apple Color Emoji", "Segoe UI Emoji";
  color: #0f172a;
  background: #f5f7fb;
}

a { color: inherit; text-decoration: none; }

:root{
  --card: #ffffff;
  --muted: #64748b;
  --line: #e6ebf3;
  --shadow: 0 8px 30px rgba(15, 23, 42, .08);

  --fav: #2aa7ff;
  --like: #51c878;
  --int: #f2c94c;
  --no:  #f16a6a;
  --unset: #ffffff;
  --unset-border: #cbd5e1;
}

/* ==========================
   Header
   ========================== */
header.top {
  max-width: 1200px;
  margin: 0 auto;
  padding: 26px 22px 14px;
}

h1 {
  margin: 0 0 6px;
  font-size: 56px;
  line-height: 1;
  letter-spacing: -0.02em;
}

p.sub {
  margin: 0 0 14px;
  color: var(--muted);
  font-size: 14px;
}

/* legend row */
.legend {
  display: flex;
  align-items: center;
  gap: 14px;
  flex-wrap: wrap;
  margin: 10px 0 12px;
}

.legend .dot {
  display: inline-flex;
  align-items: center;
  gap: 8px;
  font-size: 13px;
  color: #334155;
}

.legend .dot::before{
  content: "";
  width: 10px;
  height: 10px;
  border-radius: 999px;
  display: inline-block;
}
.legend .dot.fav::before{ background: var(--fav); }
.legend .dot.like::before{ background: var(--like); }
.legend .dot.int::before{ background: var(--int); }
.legend .dot.no::before{ background: var(--no); }
.legend .dot.empty::before{
  background: #fff;
  border: 1px solid var(--unset-border);
}

/* Actions */
.actions {
  display: flex;
  align-items: center;
  gap: 10px;
  flex-wrap: wrap;
  margin: 10px 0 14px;
}

button {
  font: inherit;
}

.actions button {
  height: 38px;
  padding: 0 14px;
  border-radius: 10px;
  border: 1px solid transparent;
  background: #0f172a;
  color: #fff;
  font-weight: 700;
  cursor: pointer;
  box-shadow: 0 6px 16px rgba(15,23,42,.12);
}

.actions button:hover { filter: brightness(1.06); }
.actions button:disabled { opacity: .55; cursor: not-allowed; }

.actions #getLink {
  background: #ff4b4b;
}

.actions button.secondary {
  background: #0f172a;
  color: #fff;
}

#shareUrl {
  width: min(760px, 100%);
  height: 40px;
  border: 1px solid var(--line);
  border-radius: 10px;
  padding: 0 12px;
  background: #fff;
  outline: none;
}

.status {
  margin-top: 8px;
  color: var(--muted);
  font-size: 12px;
}

/* ==========================
   Sheet Grid
   ========================== */
main.sheet {
  max-width: 1200px;
  margin: 0 auto;
  padding: 14px 22px 60px;
  display: grid;
  grid-template-columns: repeat(2, minmax(0, 1fr));
  gap: 18px;
}

/* single column on small screens */
@media (max-width: 980px){
  main.sheet { grid-template-columns: 1fr; }
  h1 { font-size: 40px; }
}

/* ==========================
   Section Card
   ========================== */
.section {
  background: var(--card);
  border: 1px solid var(--line);
  border-radius: 16px;
  overflow: hidden;
  box-shadow: var(--shadow);
}

.sectionHeader {
  background: #707783;
  color: #fff;
  padding: 14px 14px 12px;
  display: flex;
  align-items: flex-start;
  justify-content: space-between;
  gap: 12px;
}

.sectionHeader h2 {
  margin: 0;
  font-size: 18px;
  letter-spacing: .02em;
}

.sectionHeader .desc {
  margin-top: 6px;
  font-size: 12px;
  color: rgba(255,255,255,.86);
  line-height: 1.25;
}

/* Role pills in header (Self/Partner, Giving/Receiving, etc.) */
.rolePills {
  display: flex;
  gap: 8px;
  align-items: center;
  flex-wrap: wrap;
  justify-content: flex-end;
}

.rolePill {
  background: rgba(255,255,255,.16);
  border: 1px solid rgba(255,255,255,.22);
  padding: 6px 10px;
  border-radius: 999px;
  font-size: 11px;
  font-weight: 800;
  letter-spacing: .02em;
}

/* ==========================
   Rows / Items
   ========================== */
.rows {
  padding: 10px 0;
}

.subHeader {
  padding: 8px 14px;
  font-size: 12px;
  font-weight: 900;
  letter-spacing: .06em;
  color: #0f172a;
  text-transform: uppercase;
  border-top: 1px solid var(--line);
  border-bottom: 1px solid var(--line);
  background: #f6f8fc;
}

.row {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 12px;
  padding: 10px 14px;
  border-bottom: 1px solid var(--line);
}

.row:last-child { border-bottom: 0; }

.rowLabel {
  display: flex;
  align-items: center;
  gap: 10px;
  min-width: 220px;
  flex: 1 1 auto;
}

.rowLabel .labelText {
  font-weight: 650;
  font-size: 13px;
  color: #0f172a;
  line-height: 1.2;
}

/* right side: roles -> dots */
.roleCells {
  display: flex;
  align-items: center;
  gap: 16px;
  flex: 0 0 auto;
}

.roleCell {
  display: flex;
  align-items: center;
  gap: 8px;
}

.roleHeader {
  font-size: 11px;
  color: var(--muted);
  font-weight: 800;
}

/* ==========================
   Choice Dots (your 5 options)
   - default = desaturated and dim
   - active = full color
   ========================== */
.choiceRow {
  display: inline-flex;
  align-items: center;
  gap: 8px;
  padding: 4px 6px;
  border-radius: 999px;
  background: #f3f6fb;
  border: 1px solid #e8eef8;
}

.choiceDot {
  width: 22px;
  height: 22px;
  border-radius: 999px;
  border: 1px solid rgba(15, 23, 42, .10);
  cursor: pointer;

  /* dim + desaturate by default */
  opacity: .45;
  filter: saturate(.20) brightness(1.08);
  transform: translateZ(0);
  transition: opacity .12s ease, filter .12s ease, box-shadow .12s ease, transform .12s ease;
}

.choiceDot:hover {
  opacity: .7;
  transform: scale(1.03);
}

.choiceDot.active {
  opacity: 1;
  filter: none;
  box-shadow: 0 0 0 3px rgba(15,23,42,.10);
}

/* map ids -> colors (your JS uses s.id for className) */
.choiceDot.fav { background: var(--fav); }
.choiceDot.like { background: var(--like); }
.choiceDot.int { background: var(--int); }
.choiceDot.no { background: var(--no); }
.choiceDot.unset {
  background: var(--unset);
  border: 1px solid var(--unset-border);
}

/* ==========================
   Help "?" buttons
   ========================== */
.helpBtn, .help, .qBtn {
  width: 22px;
  height: 22px;
  border-radius: 999px;
  border: 1px solid #d8e0ee;
  background: #fff;
  color: #334155;
  font-weight: 900;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  cursor: pointer;
  flex: 0 0 auto;
}

.helpBtn:hover, .help:hover, .qBtn:hover {
  background: #f2f6ff;
}

/* ==========================
   Print / PDF
   - keep colors
   - more compact
   - include legend at top if your HTML keeps it in header
   ========================== */
@media print {
  /* important: ask browser to keep colors */
  * {
    -webkit-print-color-adjust: exact !important;
    print-color-adjust: exact !important;
  }

  body {
    background: #fff !important;
  }

  header.top {
    max-width: none;
    padding: 10mm 10mm 4mm;
  }

  h1 { font-size: 28px; }
  p.sub { font-size: 11px; margin-bottom: 8px; }

  .actions { display: none !important; } /* no buttons in PDF */

  #shareUrl { display: none !important; }
  .status { display: none !important; }

  main.sheet {
    max-width: none;
    padding: 0 10mm 10mm;
    gap: 8mm;
    grid-template-columns: repeat(2, minmax(0, 1fr));
  }

  .section {
    box-shadow: none !important;
    border: 1px solid #cfd8e6;
    break-inside: avoid;
    page-break-inside: avoid;
  }

  .sectionHeader {
    padding: 8px 10px;
  }

  .sectionHeader h2 { font-size: 14px; }
  .sectionHeader .desc { font-size: 10px; }

  .row {
    padding: 6px 10px;
  }

  .rowLabel .labelText {
    font-size: 10.5px;
    font-weight: 700;
  }

  .roleHeader { font-size: 9px; }

  .choiceRow {
    gap: 6px;
    padding: 2px 5px;
  }

  .choiceDot {
    width: 16px;
    height: 16px;
    opacity: .22;                 /* still dim by default */
    filter: saturate(.20) brightness(1.08);
  }

  .choiceDot.active {
    opacity: 1;
    filter: none;
    box-shadow: none;
  }

  .helpBtn, .help, .qBtn {
    width: 16px;
    height: 16px;
    font-size: 10px;
  }

  @page {
    size: A4;
    margin: 10mm;
  }
}
